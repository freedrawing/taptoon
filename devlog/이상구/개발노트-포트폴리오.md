# ν¬νΈν΄λ¦¬μ¤ κΈ°λ¥ κ°λ° κ³Όμ •

## κ°μ”

ν¬νΈν΄λ¦¬μ¤λ” μ‘κ°€μ κ°μΈ κΈ°λ΅λ¬Όμ„ Taptoon μ‚¬μ΄νΈ λ‚΄μ— μ €μ¥ν•  μ μλ” κΈ°λ¥μ΄λ‹¤.
- μµλ€ 5κ°κΉμ§€ μƒμ„± κ°€λ¥ν•κ³ , κ° ν¬νΈν΄λ¦¬μ¤λ¥Ό μ λ©μΌλ΅ κµ¬λ¶„ν•  μ μλ‹¤.
- μµλ€ 3,000μμ λ‚΄μ© μ…λ ¥ κ°€λ¥ν•λ‹¤.
- **κΈ€ μ‘κ°€**μ™€ **κ·Έλ¦Ό μ‘κ°€** λ¨λ‘λ¥Ό κ³ λ ¤ν•μ—¬ μ΄λ―Έμ§€ νμΌκ³Ό ν…μ¤νΈ νμΌ μ €μ¥ μ§€μ›ν•λ‹¤.

---

## π“ λ©μ°¨
1. [μ„¤κ³„ κ³Όμ •](#μ„¤κ³„-κ³Όμ •)
    - [μ΄κΈ° μ„¤κ³„](#μ΄κΈ°-μ„¤κ³„)

2. [ν¬νΈν΄λ¦¬μ¤ κΈ°λ¥ μƒμ„Έ](#ν¬νΈν΄λ¦¬μ¤-κΈ°λ¥-μƒμ„Έ)
    - [ν¬νΈν΄λ¦¬μ¤ μ‹μ‘ν•κΈ° (λΉ ν¬νΈν΄λ¦¬μ¤ μƒμ„±)](#1-ν¬νΈν΄λ¦¬μ¤-μ‹μ‘ν•κΈ°-λΉ-ν¬νΈν΄λ¦¬μ¤-μƒμ„±)
    - [ν¬νΈν΄λ¦¬μ¤ λ‚΄μ© μ±„μ°κΈ° (μ λ©, λ‚΄μ©, νμΌ)](#2-ν¬νΈν΄λ¦¬μ¤-λ‚΄μ©-μ±„μ°κΈ°-μ λ©-λ‚΄μ©-νμΌ)
    - [ν¬νΈν΄λ¦¬μ¤ μμ •ν•κΈ°](#3-ν¬νΈν΄λ¦¬μ¤-μμ •ν•κΈ°)
    - [ν¬νΈν΄λ¦¬μ¤ μ΅°νν•κΈ°](#4-ν¬νΈν΄λ¦¬μ¤-μ΅°νν•κΈ°)
    - [ν¬νΈν΄λ¦¬μ¤ μ‚­μ ν•κΈ°](#5-ν¬νΈν΄λ¦¬μ¤-μ‚­μ ν•κΈ°)

3. [νΈλ¬λΈ”μν… (Troubleshooting)](#νΈλ¬λΈ”μν…-troubleshooting)
    - [ν¬νΈν΄λ¦¬μ¤ μμ • μ‹ μ΄λ―Έμ§€ μ¤‘λ³µ λ“±λ΅ λ° μ‚­μ  λ¬Έμ ](#1-ν¬νΈν΄λ¦¬μ¤-μμ •-μ‹-μ΄λ―Έμ§€κ°€-μ¤‘λ³µ-λ“±λ΅λκ±°λ‚-μ‚­μ λμ§€-μ•λ”-λ¬Έμ )
    - [μµλ€ κ°μ μ„¤μ • λ¬Έμ ](#2-μµλ€-κ°μ-μ„¤μ •)
---

## μ„¤κ³„ κ³Όμ •

### μ΄κΈ° μ„¤κ³„
- μ΄λ―Έμ§€ νμΌλ§ μ—…λ΅λ“ν•κ³ , ν…μ¤νΈλ” `content` ν•„λ“μ— μ €μ¥ν•λ” λ°©μ‹μΌλ΅ μ„¤κ³„λμ—λ‹¤.
- ν•μ§€λ§ ν…μ¤νΈ νμΌλ„ μ—…λ΅λ“ν•  μ μλ„λ΅ λ³€κ²½λμ—λ‹¤. (μ‹λ‚λ¦¬μ¤ μ €μ¥ κ³ λ ¤)
- ν¬νΈν΄λ¦¬μ¤ μ €μ¥ κµ¬μ΅°λ¥Ό μ΄λ―Έμ§€ & ν…μ¤νΈ νμΌμ„ λ¨λ‘ ν—μ©ν•λ„λ΅ μμ •ν•μ€λ‹¤.

---

## ν¬νΈν΄λ¦¬μ¤ κΈ°λ¥ μƒμ„Έ

### 1. ν¬νΈν΄λ¦¬μ¤ μ‹μ‘ν•κΈ° (λΉ ν¬νΈν΄λ¦¬μ¤ μƒμ„±)
**μ΄κΈ° μ„¤κ³„ λ³€κ²½**  
μ²μμ—λ” ν¬νΈν΄λ¦¬μ¤ μƒμ„±κ³Ό λ™μ‹μ— λ¨λ“  λ‚΄μ©μ„ μ…λ ¥ν•λ” λ°©μ‹μ΄μ—μ§€λ§,  
ν”„λ΅ νΈμ—”λ“ UX/UIλ¥Ό κ³ λ ¤ν•μ—¬ λΉ ν¬νΈν΄λ¦¬μ¤λ¥Ό λ¨Όμ € μƒμ„±ν•κ³ , μ΄ν›„ λ‚΄μ©μ„ μ±„μ°λ„λ΅ λ³€κ²½ν•μ€λ‹¤.

**λ³€κ²½ λ‚΄μ©**
- μ‚¬μ©μκ°€ "ν¬νΈν΄λ¦¬μ¤ λ§λ“¤κΈ°" λ²„νΌ ν΄λ¦­ μ‹ λΉ ν¬νΈν΄λ¦¬μ¤λ¥Ό λ¨Όμ € μƒμ„±
- μ΄ν›„ "μ λ©, λ‚΄μ©, νμΌ"μ„ μ±„μ›λ„£κ³  μµμΆ… μ €μ¥

**API λ™μ‘ νλ¦„**
1. `POST /portfolios` β†’ λΉ ν¬νΈν΄λ¦¬μ¤ μƒμ„±
2. `PUT /portfolios/{id}` β†’ μ λ©, λ‚΄μ©, νμΌ μ¶”κ°€ λ° μμ •

---

### 2. ν¬νΈν΄λ¦¬μ¤ λ‚΄μ© μ±„μ°κΈ° (μ λ©, λ‚΄μ©, νμΌ)
**νμΌ μ—…λ΅λ“ λ°©μ‹: AWS S3 Presigned URL μ‚¬μ©**
- ν”λ«νΌ νΉμ„±μƒ μ΄λ―Έμ§€κ°€ μ¤‘μ”ν• μ”μ†μ΄λ―€λ΅ Presigned URL λ°©μ‹μ„ μ±„νƒν•μ€λ‹¤.
- μ΄λ°μ—λ” ν•΄λ‹Ή λ°©μ‹μ λ™μ‘μ„ μ΄ν•΄ν•λ” λ° μ‹κ°„μ΄ κ±Έλ Έλ‹¤.

**νμΌ μƒνƒ κ΄€λ¦¬ (3κ°€μ§€ μƒνƒ μ μ©)**

| μƒνƒ | μ„¤λ…                                             |
|------|------------------------------------------------|
| `PENDING` | μ‚¬μ©μκ°€ νμΌμ„ μ²¨λ¶€ν–μ§€λ§ μ•„μ§ μ €μ¥ν•μ§€ μ•μ€ μƒνƒ                   |
| `REGISTERED` | μ‚¬μ©μκ°€ "λ“±λ΅ν•κΈ°" λλ” "μ™„λ£" λ²„νΌμ„ λ„λ¥΄λ©΄ λ“±λ΅λλ” μƒνƒ            |
| `DELETING` | μ‚¬μ©μκ°€ μ²¨λ¶€ν• νμΌμ„ μ‚­μ ν•  κ²½μ° ν•΄λ‹Ή μƒνƒλ΅ λ³€κ²½ (Soft Delete μ μ©) |

---

### 3. ν¬νΈν΄λ¦¬μ¤ μμ •ν•κΈ°
**μμ • κ°€λ¥ν• μ”μ†**
- μ λ©κ³Ό λ‚΄μ©μ„ μμ •ν•  μ μμ
- λ―Έλ¦¬ μ²¨λ¶€λ νμΌμ„ μ¶”κ°€ λ° μ‚­μ  κ°€λ¥ (μ‚­μ  μ‹ `deleting` μƒνƒ μ μ©ν•μ—¬ Soft Delete)

**κ³ μ•„ κ°μ²΄ λ¬Έμ  ν•΄κ²°**
**λ¬Έμ  λ°μƒ:**  
μ‚¬μ©μκ°€ νμΌμ„ μ²¨λ¶€ν• ν›„ "μ™„λ£" λ²„νΌμ„ λ„λ¥΄μ§€ μ•κ³  λΈλΌμ°μ €λ¥Ό λ‹«κ±°λ‚ λ’¤λ΅ κ°€κΈ°λ¥Ό λ„λ¥Ό κ²½μ°,  
κ³ μ•„ κ°μ²΄κ°€ λ°μƒν•μ—¬ μ²¨λ¶€λ νμΌμ΄ `PENDING` μƒνƒλ΅ λ‚¨μ•„ μκ² λ¨.

**ν•΄κ²° λ°©λ²•:**
- `PENDING` μƒνƒμ—μ„ μΌμ • μ‹κ°„ λ™μ• λ³€κ²½λμ§€ μ•μ€ νμΌμ„ μλ™ μ‚­μ ν•λ” μ¤μΌ€μ¤„λ¬ μ¶”κ°€

---

### 4. ν¬νΈν΄λ¦¬μ¤ μ΅°νν•κΈ°
**μ „μ²΄ μ΅°ν (`GET /portfolios`)**
- μ‚¬μ©μκ°€ μ‘μ„±ν• λ¨λ“  ν¬νΈν΄λ¦¬μ¤λ¥Ό μ΅°νν•  μ μμ
- μµμ†ν•μ μ •λ³΄λ§ μ κ³µ (μΈλ„¤μΌ μ΄λ―Έμ§€, μ λ©, λ‚ μ§)

**κ°λ³„ μ΅°ν (`GET /portfolios/{id}`)**
- μ‚¬μ©μκ°€ νΉμ • ν¬νΈν΄λ¦¬μ¤λ¥Ό μ„ νƒν•λ©΄ λ¨λ“  λ‚΄μ©μ„ ν™•μΈν•  μ μμ

---

### 5. ν¬νΈν΄λ¦¬μ¤ μ‚­μ ν•κΈ°
**ν¬νΈν΄λ¦¬μ¤ μ‚­μ  (`DELETE /portfolios/{id}`)**
- Soft Delete μ μ© (isDeleted = true)
- μ²¨λ¶€λ νμΌμ€ μ™„μ „ν μ‚­μ  (AWS S3 λ° DBμ—μ„ μ‚­μ )

**μ„¤κ³„ μλ„ λ³€κ²½**
- μ‹¤μ  μ„λΉ„μ¤μ—μ„λ” Soft Delete ν›„ μΌμ • κΈ°κ°„ λ³΄κ΄€ν•λ” κ²ƒμ΄ μΌλ°μ μ΄μ§€λ§,
- ν„μ¬λ” μ €μ¥ κ³µκ°„ λ¬Έμ λ΅ μΈν•΄ μ™„μ „ μ‚­μ  λ°©μ‹μ„ μ±„νƒν•¨.

---

## νΈλ¬λΈ”μν… (Troubleshooting)

### 1. ν¬νΈν΄λ¦¬μ¤ μμ • μ‹ μ΄λ―Έμ§€κ°€ μ¤‘λ³µ λ“±λ΅λκ±°λ‚ μ‚­μ λμ§€ μ•λ” λ¬Έμ 
**λ¬Έμ  μƒν™©**   

μ‚¬μ©μκ°€ ν¬νΈν΄λ¦¬μ¤λ¥Ό μμ •ν•λ” κ³Όμ •μ—μ„ κΈ°μ΅΄ μ΄λ―Έμ§€λ¥Ό μ μ§€ν•λ©΄μ„ μƒ μ΄λ―Έμ§€κ°€ μ¶”κ°€λμ–΄μ•Ό ν•μ§€λ§ 
νμΌμ΄ μ¤‘λ³µ μ €μ¥λκ±°λ‚ κΈ°μ΅΄ νμΌμ΄ μ‚¬λΌμ§€λ” λ¬Έμ κ°€ λ°μƒλμ—λ‹¤.

**μ›μΈ λ¶„μ„**   

μμ • APIλ¥Ό μ‹¤ν–‰ν•λ©΄ μƒλ΅μ΄ requestκ°’μ„ λ°›κ² λλ©΄μ„ μ„μ™€ κ°™μ€ λ¬Έμ κ°€ λ°μƒλμ—λ‹¤.


**ν•΄κ²° λ°©λ²•**

κΈ°μ΅΄μ— μμ—λ νμΌκ³Ό μƒλ΅ μ¶”κ°€λλ” νμΌμ„ κµ¬λ¶„ν•μ—¬ μ²λ¦¬ν•λ” μ‘μ—…μ΄ ν•„μ”ν–λ‹¤.

**κΈ°μ΅΄ μ½”λ“**
```java
// μ΄λ―Έμ§€ νμΌ λ“±λ΅ λ° μμ • λ©”μ„λ“
// μ”μ²­λ νμΌ(pending) λ¨λ‘ μ°ΎκΈ°
List<PortfolioImage> foundFiles = portfolioImageRepository.findAllById(portfolioRequest.fileIds()).stream()
                .collect(Collectors.toList());

// pendingμ—μ„ registeredλ΅ μƒνƒ λ³€ν™
foundFiles.forEach(PortfolioImage::updateStatus);
```


**κ°μ„ λ μ½”λ“**
```java
// μ΄λ―Έμ§€ νμΌ λ“±λ΅ λ° μμ • λ©”μ„λ“
// μ”μ²­λ νμΌ(pending) λ¨λ‘ μ°ΎκΈ°
List<PortfolioImage> foundFiles = portfolioImageRepository.findAllById(portfolioRequest.fileIds()).stream()
        .filter(file -> file.getStatus() == Status.PENDING) // Pending μƒνƒμΈ νμΌλ§ μ²λ¦¬ (μ¤‘λ³µ λ°©μ§€)
        .collect(Collectors.toList());

// pendingμ—μ„ registeredλ΅ μƒνƒ λ³€ν™
foundFiles.forEach(PortfolioImage::updateStatus);
```
**κ²°κ³Ό**

ν•΄κ²° κ³Όμ •μ€ κ±±μ •ν–λ κ²ƒλ³΄λ‹¤λ” μμ™Έλ΅ κ°„λ‹¨ν–λ‹¤. streamμ—μ„ filterλ¥Ό μ μ©μ‹μΌ νμΌμ„ κµ¬λ¶„μ‹μΌμ£Όμ—λ”λ°
κΈ°μ΅΄μ— μμ—λ νμΌμ€ `REGISTERED` μƒνƒμ΄κ³  μƒλ΅ μ¶”κ°€λ  νμΌμ€ ν•­μƒ `PENDING` μƒνƒμ΄κΈ° λ•λ¬Έμ—
μ„ μ½”λ“μ²λΌ μμ • APIμ—μ„λ” `PENDING` μƒνƒμ νμΌλ“¤λ§ μ²λ¦¬λκ² ν•΄μ£Όμ—λ‹¤.

---

## 2. μµλ€ κ°μ μ„¤μ •

ν•΄λ‹Ή λ¬Έμ λ” ν¬κ² μΉλ…μ μΈ λ¬Έμ λ” μ•„λ‹μ§€λ§, μ‰½κ² ν—·κ°λ¦΄ μ μλ” λ¶€λ¶„μ΄κΈ° λ•λ¬Έμ— νΈλ¬λΈ”μν…μ— κ°„λ‹¨ν μ¶”κ°€ν•΄λ³΄λ ¤κ³  ν•λ‹¤.

 **λ¬Έμ  μƒν™©**
ν¬νΈν΄λ¦¬μ¤ μƒμ„± μ‹ **μµλ€ κ°μλ¥Ό 5κ°λ΅ μ ν•**ν•λ ¤κ³  ν–λ‹¤.  
κ·Έλμ„ λ‹¤μκ³Ό κ°™μ€ μ½”λ“λ¥Ό μ‘μ„±ν–λ‹¤.

```java
// ν¬νΈν΄λ¦¬μ¤λ” μµλ€ 5κ°κΉμ§€ μƒμ„± κ°€λ¥
if (countPortfolio > 5) {
    throw new CreationLimitExceededException(ErrorCode.CREATION_LIMIT_EXCEEDED);
}
```
ν•μ§€λ§ μ„μ™€ κ°™μ΄ μ‘μ„±ν•λ©΄ μ‹¤μ λ΅λ” 6κ°κΉμ§€ μƒμ„±λκ² λλ‹¤.

 **μ›μΈ λ¶„μ„**
- `countPortfolio > 5`μ μλ―Έλ” **ν¬νΈν΄λ¦¬μ¤ κ°μκ°€ 5κ°λ³΄λ‹¤ λ§μ„ λ•** μμ™Έκ°€ λ°μƒν•λ” κ²ƒμ΄λ‹¤.
- μ¦‰, ν¬νΈν΄λ¦¬μ¤ κ°μκ°€ **5κ°μΌ λ•λ” μμ™Έκ°€ λ°μƒν•μ§€ μ•λ”λ‹¤**.
- λ”°λΌμ„ μ‚¬μ©μκ°€ 5κ°κΉμ§€ μƒμ„±ν• ν›„ **6λ²μ§Έ ν¬νΈν΄λ¦¬μ¤λ¥Ό μƒμ„±ν•  λ• μμ™Έκ°€ λ°μƒ**ν•κ² λλ‹¤.
- **κ²°κ³Όμ μΌλ΅ 6κ°κΉμ§€ μƒμ„±μ΄ κ°€λ¥**ν• λ¬Έμ κ°€ λ°μƒλ κ²ƒμ΄λ‹¤.

 **ν•΄κ²° λ°©λ²•**
ν•΄λ‹Ή λ¬Έμ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ μ΅°κ±΄μ„ μμ •ν•μ€λ‹¤.

```java
// ν¬νΈν΄λ¦¬μ¤λ” μµλ€ 5κ°κΉμ§€ μƒμ„± κ°€λ¥
if (5 <= countPortfolio) {
    throw new CreationLimitExceededException(ErrorCode.CREATION_LIMIT_EXCEEDED);
}
```
 **κ²°λ΅ **

μ½”λ”© κ²½ν—μ΄ λ§μ€ μ‚¬λμ΄λΌλ„ μ„μ™€ κ°™μ€ μ‹¤μλ¥Ό ν•  μ μκΈ° λ•λ¬Έμ—  λ³ΈμΈ λ‚λ¦„μ **κ·μΉ™μ„ μ •ν•λ©΄ μ‹¤μλ¥Ό μ¤„μΌ μ μλ‹¤**.

 β… μ‹¤μλ¥Ό λ°©μ§€ν•λ” ν
- **ν•­μƒ ν° μ«μλ¥Ό μ¤λ¥ΈνΈμ— λ°°μΉν•λ‹¤.**
- **ν•­μƒ μ‘μ€ μ«μλ¥Ό μ™ΌνΈμ— λ°°μΉν•λ‹¤.**

μ΄λ¬ν• μ½”λ”© μ¤νƒ€μΌμ„ μ μ§€ν•λ©΄ ν—·κ°λ¦¬μ§€ μ•κ³  μ‹¤μλ¥Ό λ°©μ§€ν•  μ μλ‹¤.




---
[κ°λ°λ…ΈνΈλ΅ λμ•„κ°€κΈ°](../κ°λ°λ…ΈνΈ.md)