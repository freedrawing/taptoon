# 이미지 리사이징 구현 방법

이미지의 원본은 생각보다는 크고, 그러한 이미지 여러 개를 로딩하는 과정은 시간이 꽤나 걸릴 지 모른다.<br>
그렇다면, 이미지 원본을 불러와야 할 때를 제외하고는, 리사이징을 해서 썸네일 이미지를 불러오는 것이 좋을 것 같다.<br>
그렇다면 이미지 업로드를 진행 한 후, 이미지 리사이징을 어떻게 하면 좋을까?

## 구현 방식
1. 클라이언트가 서버에 이미지를 전달 해 준 후, 서버에서 리사이징 진행
2. 클라이언트측에서 리사이징을 진행
3. S3에 저장 후 Lambda에서 리사이징 진행

## 구현 방식 분석
1번 방식: 해당 방식은 PreSignedUrl 방식에는 적합하지 않는다. 클라이언트가 직접 S3에 이미지를 넣어야 하는데, <br>
1번의 방식은 서버에서 리사이징을 진행한 후 다시 클라이언트에게 전달하고, 그 후에 S3와 통신하는 비효율적인 흐름이 진행된다.

2번 방식: 클라이언트 쪽에 책임을 넘기는 방법도 고려 해 볼 만하다. 하지만 클라이언트에서 리사이징을 적용하는 것은 <br>
일관성을 보장할 수 없다. 예를 들어, 프론트 A팀에서 처리하다가 B팀에 업무가 전달되면 이러한 리사이징 규격이 달라질 수 있다.<br>
이러한 상황에서 일관성을 보장할 수 있는 가장 좋은 방법이 서버에서 리사이징을 처리하는 방법이라고 생각한다.

3번 방식: 서버를 분리해서 리사이징을 진행하는 것이 아닌, S3에 저장되는 순간 트리거가 작동해서 Lambda 함수를 작동시킨다.<br>
이 방식은 서버를 따로 구현 할 필요가 없어 서버 유지 비용이 필요없어 비용을 절감할 수 있다.

## 현재 프로젝트 상황
1. 현재 이미지 저장 방식을 PreSignedUrl로 정했기 때문에, 1번 방식은 적합하지 않다. <br>참고: [이미지 저장 방식 비교 분석](이미지_저장_방식_비교_분석.md)
2. 리사이징만을 위한 서버를 따로 만들어서 관리하기에는 이미지의 용량이 매우 크지 않아 비용이 낭비될 것 같다.

## 결론
AWS의 Lambda를 사용해서, 사용 한 만큼 비용을 지불하는 ServerLess구조를 채택하고자 한다.
실제 사용량에 따라 비용이 측정되고, 서버와의 책임이 분리되어 비용을 효율적으로 관리할 수 있을 듯 하다.