# Refresh Token 관리 정책

## 목차
- [회원 인증 흐름](#회원-인증-흐름)
- []

우리가 애플리케이션을 이용할 때, 가장 중요한 것은 인증(Authentication)과 인가(Authorization)이다.

사용자가 작성해 놓은 글을 다른 사람이 멋대로 수정하거나 삭제할 수 있다면 이는 애플리케이션을 망하게 하는 지름길이 될 것이다.

이러한 상황들을 예방하기 위해 우리는 인증/인가를 잘 설정해 주어야 한다.

이러한 인증/인가를 설정하기 위해 이해해야 할 인증 흐름에 대해 먼저 알아보도록 하겠다.

## 회원 인증 흐름
 
1. 사용자가 회원 정보로 로그인을 시도한다.
2. security와 토큰 검증을 통해 인증에 성공한다.
3. 사용자가 인증 정보를 통해 서비스를 이용한다.
4. 사용자가 로그아웃을 시도한다.(refresh 토큰 파기)

## 토큰 인증 흐름
1. 사용자가 회원 정보로 로그인을 시도하고 인증 절차가 통과하면 Refresh 토큰과 Access 토큰을 서버에서 발급 해 준다.
2. 사용자는 Access 토큰의 만료 시간까지 해당 토큰으로 애플리케이션의 서비스를 이용한다.
3. Access 토큰 만료 시 사용자는 Refresh 토큰을 가지고 Access 토큰의 재발급을 서버에 요청한다.
4. 서버는 보관하고 있는 사용자의 Refresh 토큰과 사용자가 제시한 토큰이 일치하는지 검증한다.
5. 검증이 완료되면 사용자에게 Access 토큰을 재발급해준다.
6. 사용자가 로그아웃 시, Refresh 토큰을 파기한다.

## 고려해야 할 보안 이슈
애플리케이션의 보안 이슈를 위해서는 토큰 발급과 인증에 신경써야만 한다.<br>
회원 인증은 토큰에서부터 시작되고 끝난다고 해도 과언이 아니다. 토큰은 위조가 될 수 없다는 보장이 있기 때문에,
토큰에 있는 정보를 통해 유저를 인증할 수만 있으면 되는 것이다(?)
~~서론
이러한 과정에서 Access 토큰의 재발급을 위한 Refresh 토큰은 어떻게 관리하는 것이 좋을까?

## Refresh Token 관리 정책
Refresh 토큰을 저장하는 방법은 크게 두 가지로 나눌 수 있을 것 같다.
1. Redis에 Refresh 토큰을 저장
2. DB에 Refresh 토큰을 저장